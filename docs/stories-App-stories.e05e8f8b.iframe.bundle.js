/*! For license information please see stories-App-stories.e05e8f8b.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkfigma_chat_react_tsx=self.webpackChunkfigma_chat_react_tsx||[]).push([[412],{"./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_require__.d(__webpack_exports__,{Z:function(){return _arrayLikeToArray}})},"./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return _toConsumableArray}});var arrayLikeToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js");var unsupportedIterableToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return(0,arrayLikeToArray.Z)(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||(0,unsupportedIterableToArray.Z)(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},"./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return _unsupportedIterableToArray}});var _arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js");function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return(0,_arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__.Z)(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,_arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__.Z)(o,minLen):void 0}}},"./src/stories/App.stories.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{InteractiveApp:function(){return InteractiveApp},__namedExportsOrder:function(){return __namedExportsOrder},default:function(){return App_stories}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),ChatFrame=__webpack_require__("./src/io/ui/components/ChatFrame/index.tsx");var unsupportedIterableToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||(0,unsupportedIterableToArray.Z)(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var react=__webpack_require__("./node_modules/react/index.js"),EventWrapper=__webpack_require__("./src/io/ui/utils/EventWrapper.tsx"),client=__webpack_require__("./node_modules/react-dom/client.js"),selectors=__webpack_require__("./src/io/ui/selectors.ts"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),Subject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),BehaviorSubject=function(_super){function BehaviorSubject(_value){var _this=_super.call(this)||this;return _this._value=_value,_this}return(0,tslib_es6.ZT)(BehaviorSubject,_super),Object.defineProperty(BehaviorSubject.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),BehaviorSubject.prototype._subscribe=function(subscriber){var subscription=_super.prototype._subscribe.call(this,subscriber);return!subscription.closed&&subscriber.next(this._value),subscription},BehaviorSubject.prototype.getValue=function(){var hasError=this.hasError,thrownError=this.thrownError,_value=this._value;if(hasError)throw thrownError;return this._throwIfClosed(),_value},BehaviorSubject.prototype.next=function(value){_super.prototype.next.call(this,this._value=value)},BehaviorSubject}(Subject.x),bridge=__webpack_require__("./src/bridge.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),PropsSubject=new BehaviorSubject((0,selectors.E)(bridge.E));function handler(state){var props=(0,selectors.E)(state);PropsSubject.next(props)}!function init(){try{var rootElement=document.getElementById("root");client.createRoot(rootElement).render((0,jsx_runtime.jsx)(react.StrictMode,{children:(0,jsx_runtime.jsx)(App,{})}))}catch(e){console.error(e)}}();try{handler.displayName="handler",handler.__docgenInfo={description:"",displayName:"handler",props:{input:{defaultValue:null,description:"",name:"input",required:!0,type:{name:"string"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}},messages:{defaultValue:null,description:"",name:"messages",required:!0,type:{name:"TMessage[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/io/ui/index.tsx#handler"]={docgenInfo:handler.__docgenInfo,name:"handler",path:"src/io/ui/index.tsx#handler"})}catch(__react_docgen_typescript_loader_error){}var esm_typeof=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/typeof.js");function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==(0,esm_typeof.Z)(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js");var toPropertyKey=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(0,toPropertyKey.Z)(descriptor.key),descriptor)}}var isFunction=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/isFunction.js");function operate(init){return function(source){if(function hasLift(source){return(0,isFunction.m)(null==source?void 0:source.lift)}(source))return source.lift((function(liftedSource){try{return init(liftedSource,this)}catch(err){this.error(err)}}));throw new TypeError("Unable to lift unknown Observable type")}}function createOperatorSubscriber(destination,onNext,onComplete,onError,onFinalize){return new OperatorSubscriber(destination,onNext,onComplete,onError,onFinalize)}var OperatorSubscriber=function(_super){function OperatorSubscriber(destination,onNext,onComplete,onError,onFinalize,shouldUnsubscribe){var _this=_super.call(this,destination)||this;return _this.onFinalize=onFinalize,_this.shouldUnsubscribe=shouldUnsubscribe,_this._next=onNext?function(value){try{onNext(value)}catch(err){destination.error(err)}}:_super.prototype._next,_this._error=onError?function(err){try{onError(err)}catch(err){destination.error(err)}finally{this.unsubscribe()}}:_super.prototype._error,_this._complete=onComplete?function(){try{onComplete()}catch(err){destination.error(err)}finally{this.unsubscribe()}}:_super.prototype._complete,_this}return(0,tslib_es6.ZT)(OperatorSubscriber,_super),OperatorSubscriber.prototype.unsubscribe=function(){var _a;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var closed_1=this.closed;_super.prototype.unsubscribe.call(this),!closed_1&&(null===(_a=this.onFinalize)||void 0===_a||_a.call(this))}},OperatorSubscriber}(__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subscriber.js").Lv);var EMPTY=new(__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Observable.js").y)((function(subscriber){return subscriber.complete()}));var Decoupler=function(){function Decoupler(initialState,update){var _this=this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Decoupler),this.ActionSubject=new Subject.x,this.IOQueueSubject=new BehaviorSubject([]),this.StateSubject=void 0,this.ioHandlers=[],this.update=void 0,this.StateSubject=new BehaviorSubject(initialState),this.update=update,this.ActionSubject.subscribe((function(action){_this.IOQueueSubject.next([].concat((0,toConsumableArray.Z)(_this.IOQueueSubject.getValue()),[action]))}))}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Decoupler,[{key:"registerIOHandler",value:function registerIOHandler(handler){this.ioHandlers.push(handler)}},{key:"io",value:function io(state){var _this2=this;return new Promise((function(res){_this2.ioHandlers.forEach((function(handler){handler(state)})),_this2.IOQueueSubject.pipe(function filter(predicate,thisArg){return operate((function(source,subscriber){var index=0;source.subscribe(createOperatorSubscriber(subscriber,(function(value){return predicate.call(thisArg,value,index++)&&subscriber.next(value)})))}))}((function(queue){return queue.length>0})),function take(count){return count<=0?function(){return EMPTY}:operate((function(source,subscriber){var seen=0;source.subscribe(createOperatorSubscriber(subscriber,(function(value){++seen<=count&&(subscriber.next(value),count<=seen&&subscriber.complete())})))}))}(1)).subscribe((function(queue){var nextQueue=queue.slice(1);_this2.IOQueueSubject.next(nextQueue),res(queue[queue.length-1])}))}))}},{key:"sendAction",value:function sendAction(action){this.ActionSubject.next(action)}},{key:"init",value:function init(){var _this3=this,initialState=this.StateSubject.getValue(),applicationLoop=function(){var _ref=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(state){var _action,nextState;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,_this3.io(state);case 3:return _action=_context.sent,nextState=_this3.update(state,_action),_context.abrupt("return",applicationLoop(nextState));case 8:return _context.prev=8,_context.t0=_context.catch(0),console.error(_context.t0),_context.abrupt("return",applicationLoop(state));case 12:case"end":return _context.stop()}}),_callee,null,[[0,8]])})));return function applicationLoop(_x){return _ref.apply(this,arguments)}}();applicationLoop(initialState)}}]),Decoupler}(),update=__webpack_require__("./src/update/index.ts"),types=__webpack_require__("./src/types.ts"),wait=function wait(ms){return new Promise((function(resolve){setTimeout((function(){return resolve()}),ms)}))},getRandomMessage=function getRandomMessage(){var messages=["I see, I see...","Hm...","Are you impressed yet?","Well, I don't know what to say to you","Okay, okay","Keep going","I'm listening, go on","Tell me more","Is that all you have to say?","Be right back"],index=Math.floor(Math.random()*messages.length);return messages[Math.min(index,messages.length-1)]},communication_handler=function(){var _ref=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(state){return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(state.isLoading){_context.next=2;break}return _context.abrupt("return");case 2:return _context.next=4,wait(1e3);case 4:return decoupler.sendAction({type:types.In.IO,id:{id:types.G3.Communication},payload:getRandomMessage()}),_context.next=7,wait(1e3);case 7:case"end":return _context.stop()}}),_callee)})));return function handler(_x){return _ref.apply(this,arguments)}}(),decoupler=new Decoupler(bridge.E,update.V);function withDecoupler(WrappedComponent){return function(){(0,react.useEffect)((function(){var subscription=EventWrapper.B.subscribe((function(event){decoupler.sendAction(event)}));return function(){return subscription.unsubscribe()}}),[]);var _useSharedState=function useSharedState(subject){var _useState2=_slicedToArray((0,react.useState)(null==subject?void 0:subject.getValue()),2),value=_useState2[0],setState=_useState2[1];return(0,react.useEffect)((function(){var sub=subject.subscribe((function(s){return setState(s)}));return function(){return sub.unsubscribe()}}),[subject]),[value,function newSetState(state){return subject.next(state)}]}(PropsSubject),props=_slicedToArray(_useSharedState,1)[0];return void 0===typeof window?null:(0,jsx_runtime.jsx)(WrappedComponent,(0,objectSpread2.Z)({},props))}}decoupler.registerIOHandler(handler),decoupler.registerIOHandler(communication_handler),decoupler.init();try{withDecoupler.displayName="withDecoupler",withDecoupler.__docgenInfo={description:"",displayName:"withDecoupler",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/io/ui/utils/withDecoupler.tsx#withDecoupler"]={docgenInfo:withDecoupler.__docgenInfo,name:"withDecoupler",path:"src/io/ui/utils/withDecoupler.tsx#withDecoupler"})}catch(__react_docgen_typescript_loader_error){}var _InteractiveApp$param,_InteractiveApp$param2,_InteractiveApp$param3,App=withDecoupler(ChatFrame.t);try{App.displayName="App",App.__docgenInfo={description:"",displayName:"App",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/io/ui/App.tsx#App"]={docgenInfo:App.__docgenInfo,name:"App",path:"src/io/ui/App.tsx#App"})}catch(__react_docgen_typescript_loader_error){}var App_stories={title:"Decoupler/InteractiveApp",component:App,parameters:{}},InteractiveApp={args:{input:"",messages:[],isLoading:!1}};InteractiveApp.parameters=(0,objectSpread2.Z)((0,objectSpread2.Z)({},InteractiveApp.parameters),{},{docs:(0,objectSpread2.Z)((0,objectSpread2.Z)({},null===(_InteractiveApp$param=InteractiveApp.parameters)||void 0===_InteractiveApp$param?void 0:_InteractiveApp$param.docs),{},{source:(0,objectSpread2.Z)({originalSource:"{\n  args: initialState\n}"},null===(_InteractiveApp$param2=InteractiveApp.parameters)||void 0===_InteractiveApp$param2||null===(_InteractiveApp$param3=_InteractiveApp$param2.docs)||void 0===_InteractiveApp$param3?void 0:_InteractiveApp$param3.source)})});var __namedExportsOrder=["InteractiveApp"]},"./src/bridge.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{E:function(){return initialState}});var initialState={input:"",messages:[],isLoading:!1}},"./src/io/ui/components/ChatFrame/index.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{t:function(){return ChatFrame}});var react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),VariantChatgpt=function VariantChatgpt(_ref){var className=_ref.className;return(0,jsx_runtime.jsxs)("svg",{className:"variant-chatgpt ".concat(className),fill:"none",height:"30",viewBox:"0 0 30 30",width:"30",xmlns:"http://www.w3.org/2000/svg",children:[(0,jsx_runtime.jsx)("rect",{className:"rect",fill:"#10A37F",height:"30",rx:"2",width:"30"}),(0,jsx_runtime.jsx)("path",{className:"path",d:"M24.1393 13.0526C24.3799 12.33 24.4634 11.5644 24.3841 10.8071C24.3049 10.0497 24.0647 9.31796 23.6798 8.66089C23.1092 7.66703 22.2376 6.88016 21.1907 6.41382C20.1439 5.94748 18.976 5.82577 17.8554 6.06626C17.35 5.49669 16.7288 5.04163 16.0333 4.73157C15.3378 4.42152 14.5841 4.2636 13.8226 4.26839C12.677 4.26562 11.5601 4.62674 10.6329 5.29967C9.70577 5.9726 9.01628 6.92259 8.66383 8.01265C7.91752 8.16542 7.21245 8.47586 6.59583 8.92319C5.97921 9.37051 5.46526 9.94439 5.0884 10.6064C4.51322 11.5976 4.2677 12.7457 4.38725 13.8854C4.50679 15.025 4.98523 16.0973 5.75355 16.9474C5.51298 17.67 5.42953 18.4355 5.50877 19.1929C5.58802 19.9503 5.82814 20.682 6.21307 21.3391C6.78375 22.3329 7.65537 23.1197 8.7022 23.5861C9.74902 24.0524 10.917 24.1741 12.0375 23.9337C12.5429 24.5033 13.1641 24.9583 13.8596 25.2684C14.5551 25.5784 15.3088 25.7364 16.0703 25.7316C17.2165 25.7346 18.334 25.3733 19.2614 24.7C20.189 24.0266 20.8786 23.0759 21.2308 21.9852C21.9771 21.8324 22.6821 21.522 23.2988 21.0747C23.9154 20.6274 24.4293 20.0534 24.8062 19.3914C25.3807 18.4004 25.6256 17.2525 25.5057 16.1133C25.3859 14.9741 24.9075 13.9023 24.1393 13.0526ZM16.072 24.3285C15.1311 24.3298 14.2197 24.0003 13.4972 23.3976C13.5298 23.3798 13.5869 23.3485 13.6242 23.3257L17.8978 20.8571C18.005 20.7961 18.0941 20.7076 18.1558 20.6008C18.2176 20.4939 18.2497 20.3725 18.249 20.2491V14.2242L20.0553 15.2672C20.0648 15.2719 20.0729 15.2789 20.0791 15.2875C20.0852 15.2962 20.0891 15.3062 20.0904 15.3167V20.3062C20.0891 21.3719 19.6654 22.3937 18.9122 23.1476C18.159 23.9015 17.1376 24.3262 16.072 24.3285ZM7.42999 20.6376C6.95871 19.8232 6.78885 18.8691 6.95016 17.9422C6.98189 17.9612 7.03732 17.9951 7.0771 18.018L11.3507 20.4865C11.4572 20.5487 11.5783 20.5815 11.7017 20.5815C11.825 20.5815 11.9462 20.5487 12.0527 20.4865L17.2703 17.4738V19.5598C17.2709 19.5705 17.2688 19.5811 17.2643 19.5908C17.2598 19.6005 17.253 19.6089 17.2445 19.6153L12.9243 22.1096C12.0003 22.6418 10.9028 22.7857 9.87276 22.5097C8.84271 22.2337 7.9642 21.5604 7.42999 20.6376ZM6.30574 11.308C6.77498 10.4926 7.51612 9.8683 8.39938 9.54436C8.39938 9.58117 8.39726 9.64637 8.39726 9.6916V14.6287C8.39651 14.752 8.42861 14.8732 8.49026 14.9801C8.55191 15.0869 8.64088 15.1753 8.74804 15.2363L13.9656 18.2486L12.1593 19.2915C12.1504 19.2974 12.1402 19.301 12.1295 19.302C12.1189 19.3029 12.1082 19.3013 12.0984 19.2971L7.7778 16.8006C6.85535 16.2664 6.18237 15.3882 5.90642 14.3586C5.63047 13.329 5.77407 12.2319 6.30574 11.308ZM21.1466 14.7615L15.9289 11.7489L17.7353 10.7063C17.7442 10.7004 17.7544 10.6968 17.7651 10.6959C17.7757 10.6949 17.7864 10.6966 17.7962 10.7008L22.1168 13.1951C22.7787 13.5775 23.318 14.1405 23.6715 14.8182C24.025 15.496 24.1781 16.2604 24.1129 17.0221C24.0477 17.7837 23.7668 18.511 23.3033 19.1188C22.8397 19.7266 22.2125 20.1897 21.4952 20.4539C21.4952 20.4167 21.4952 20.3515 21.4952 20.3062V15.3692C21.4962 15.2461 21.4645 15.1249 21.4032 15.0181C21.3419 14.9113 21.2534 14.8228 21.1466 14.7615ZM22.9444 12.0556C22.9127 12.0362 22.8573 12.0027 22.8175 11.9799L18.5439 9.51136C18.4374 9.44923 18.3163 9.41644 18.1929 9.41644C18.0696 9.41644 17.9484 9.44923 17.8419 9.51136L12.6243 12.5241V10.438C12.6237 10.4274 12.6258 10.4167 12.6303 10.4071C12.6348 10.3974 12.6416 10.389 12.6501 10.3826L16.9703 7.89037C17.6321 7.50874 18.389 7.32347 19.1523 7.35623C19.9155 7.389 20.6537 7.63845 21.2804 8.0754C21.9071 8.51234 22.3964 9.11872 22.6911 9.8236C22.9858 10.5285 23.0737 11.3026 22.9444 12.0556ZM11.6423 15.7737L9.83547 14.7307C9.82602 14.726 9.81781 14.719 9.8117 14.7103C9.80558 14.7017 9.80166 14.6917 9.80037 14.6811V9.6916C9.80086 8.92742 10.019 8.17917 10.4293 7.53445C10.8396 6.88974 11.4251 6.37523 12.1172 6.05116C12.8093 5.72709 13.5793 5.60687 14.3373 5.70456C15.0952 5.80225 15.8096 6.11382 16.3969 6.60279C16.3644 6.62056 16.3077 6.65187 16.27 6.67472L11.9964 9.14325C11.8891 9.20421 11.8001 9.29263 11.7384 9.39943C11.6767 9.50621 11.6445 9.62753 11.6452 9.75084L11.6423 15.7737ZM12.6235 13.658L14.9473 12.3159L17.2711 13.6572V16.3406L14.9473 17.682L12.6235 16.3406V13.658Z",fill:"white"})]})};try{VariantChatgpt.displayName="VariantChatgpt",VariantChatgpt.__docgenInfo={description:"",displayName:"VariantChatgpt",props:{className:{defaultValue:null,description:"",name:"className",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/io/ui/icons/VariantChatGPT.tsx#VariantChatgpt"]={docgenInfo:VariantChatgpt.__docgenInfo,name:"VariantChatgpt",path:"src/io/ui/icons/VariantChatGPT.tsx#VariantChatgpt"})}catch(__react_docgen_typescript_loader_error){}var Avatar=function Avatar(_ref){var variant=_ref.variant,variantYouClassName=_ref.variantYouClassName,yClassName=_ref.yClassName;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["chat-GPT"===variant&&(0,jsx_runtime.jsx)(VariantChatgpt,{className:"variant-chatgpt"}),"you"===variant&&(0,jsx_runtime.jsx)("div",{className:"avatar ".concat(variantYouClassName),children:(0,jsx_runtime.jsx)("div",{className:"y ".concat(yClassName),children:"Y"})})]})};try{Avatar.displayName="Avatar",Avatar.__docgenInfo={description:"",displayName:"Avatar",props:{variant:{defaultValue:null,description:"",name:"variant",required:!0,type:{name:"enum",value:[{value:'"chat-GPT"'},{value:'"you"'}]}},variantYouClassName:{defaultValue:null,description:"",name:"variantYouClassName",required:!0,type:{name:"string"}},yClassName:{defaultValue:null,description:"",name:"yClassName",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/io/ui/components/Avatar/index.tsx#Avatar"]={docgenInfo:Avatar.__docgenInfo,name:"Avatar",path:"src/io/ui/components/Avatar/index.tsx#Avatar"})}catch(__react_docgen_typescript_loader_error){}var Message=function Message(_ref){var _ref$message=_ref.message,message=void 0===_ref$message?"This is text!":_ref$message,variant=_ref.variant,className=_ref.className;return(0,jsx_runtime.jsxs)("div",{className:"message ".concat(variant," ").concat(className),children:["user"===variant&&(0,jsx_runtime.jsx)(Avatar,{variant:"you",variantYouClassName:"avatar-instance",yClassName:"instance-node"}),"bot"===variant&&(0,jsx_runtime.jsx)(VariantChatgpt,{className:"avatar-1"}),(0,jsx_runtime.jsx)("div",{className:"this-is-text",children:message})]})};try{Message.displayName="Message",Message.__docgenInfo={description:"",displayName:"Message",props:{message:{defaultValue:{value:"This is text!"},description:"",name:"message",required:!1,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!0,type:{name:"enum",value:[{value:'"bot"'},{value:'"user"'}]}},className:{defaultValue:null,description:"",name:"className",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/io/ui/components/Message/index.tsx#Message"]={docgenInfo:Message.__docgenInfo,name:"Message",path:"src/io/ui/components/Message/index.tsx#Message"})}catch(__react_docgen_typescript_loader_error){}var Messages=(0,react.memo)((function(_ref){var className=_ref.className,messages=_ref.messages,ref=(0,react.useRef)(null);return(0,react.useEffect)((function(){var _ref$current;ref.current&&ref.current.scrollTo(0,null===(_ref$current=ref.current)||void 0===_ref$current?void 0:_ref$current.scrollHeight)}),[messages]),(0,jsx_runtime.jsx)("div",{className:"messages ".concat(className),ref:ref,children:messages.map((function(message){return(0,jsx_runtime.jsx)(Message,{className:"message-instance",message:message.text,variant:message.user},message.id)}))})}),(function(prev,next){return prev.messages.length===next.messages.length}));try{Messages.displayName="Messages",Messages.__docgenInfo={description:"",displayName:"Messages",props:{className:{defaultValue:null,description:"",name:"className",required:!0,type:{name:"string"}},messages:{defaultValue:null,description:"",name:"messages",required:!0,type:{name:"TMessage[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/io/ui/components/Messages/index.tsx#Messages"]={docgenInfo:Messages.__docgenInfo,name:"Messages",path:"src/io/ui/components/Messages/index.tsx#Messages"})}catch(__react_docgen_typescript_loader_error){}var EventWrapper=__webpack_require__("./src/io/ui/utils/EventWrapper.tsx"),ChatFrame=function ChatFrame(_ref){var messages=_ref.messages,disabled=_ref.disabled,input=_ref.input;return(0,jsx_runtime.jsxs)("div",{className:"chat-frame",children:[(0,jsx_runtime.jsx)("div",{className:"title-frame",children:(0,jsx_runtime.jsx)("div",{className:"title",children:"Figma Chat"})}),(0,jsx_runtime.jsx)(Messages,{className:"messages-instance",messages:messages}),(0,jsx_runtime.jsx)("div",{className:"input-frame",children:(0,jsx_runtime.jsx)(EventWrapper.p,{id:{id:"input"},children:(0,jsx_runtime.jsx)("input",{disabled:disabled,className:"input",value:input})})})]})};try{ChatFrame.displayName="ChatFrame",ChatFrame.__docgenInfo={description:"",displayName:"ChatFrame",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}},messages:{defaultValue:null,description:"",name:"messages",required:!0,type:{name:"TMessage[]"}},input:{defaultValue:null,description:"",name:"input",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/io/ui/components/ChatFrame/index.tsx#ChatFrame"]={docgenInfo:ChatFrame.__docgenInfo,name:"ChatFrame",path:"src/io/ui/components/ChatFrame/index.tsx#ChatFrame"})}catch(__react_docgen_typescript_loader_error){}},"./src/io/ui/selectors.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{E:function(){return selectMainProps}});var C_Users_Kirill_Documents_Repos_figma_chat_react_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),selectMainProps=function selectMainProps(state){return(0,C_Users_Kirill_Documents_Repos_figma_chat_react_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.Z)((0,C_Users_Kirill_Documents_Repos_figma_chat_react_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.Z)({},state),{},{disabled:null==state?void 0:state.isLoading})}},"./src/io/ui/utils/EventWrapper.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{B:function(){return EventSubject},p:function(){return EventWrapper}});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),EventSubject=new rxjs__WEBPACK_IMPORTED_MODULE_2__.x,EventWrapper=function EventWrapper(props){var children=props.children,id=props.id,childrenWithProps=react__WEBPACK_IMPORTED_MODULE_0__.Children.map(children,(function(child){return react__WEBPACK_IMPORTED_MODULE_0__.isValidElement(child)?react__WEBPACK_IMPORTED_MODULE_0__.cloneElement(child,{id:[Object(id).values].join("-"),onClick:function onClick(e){e.preventDefault(),EventSubject.next({type:"click",id:id})},onChange:function onChange(e){var _e$target;e.preventDefault(),EventSubject.next({type:"change",id:id,payload:null==e||null===(_e$target=e.target)||void 0===_e$target?void 0:_e$target.value})},onKeyDown:function onKeyDown(e){var _e$target2;"Enter"===e.key&&(e.preventDefault(),EventSubject.next({type:"enter",id:id,payload:null==e||null===(_e$target2=e.target)||void 0===_e$target2?void 0:_e$target2.value}))}}):child}));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:childrenWithProps})};try{EventWrapper.displayName="EventWrapper",EventWrapper.__docgenInfo={description:"",displayName:"EventWrapper",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"{ id: string; uuid?: string | undefined; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/io/ui/utils/EventWrapper.tsx#EventWrapper"]={docgenInfo:EventWrapper.__docgenInfo,name:"EventWrapper",path:"src/io/ui/utils/EventWrapper.tsx#EventWrapper"})}catch(__react_docgen_typescript_loader_error){}},"./src/types.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{G3:function(){return EControlId},In:function(){return EActionType},Sf:function(){return EUser}});var EUser=function(EUser){return EUser.User="user",EUser.Bot="bot",EUser}({}),EControlId=function(EControlId){return EControlId.Input="input",EControlId.Communication="remote",EControlId}({}),EActionType=function(EActionType){return EActionType.Click="click",EActionType.Change="change",EActionType.Enter="enter",EActionType.IO="io",EActionType}({})},"./src/update/index.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{q:function(){return compose},V:function(){return update}});var commandMap=new Map;function generateKey(obj){return Object.entries(obj).sort().toString()}var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),types=__webpack_require__("./src/types.ts");commandMap.set(generateKey({id:types.G3.Input,type:types.In.Change}),(function execute(state,action){var type=action.type,payload=action.payload;return type!==types.In.Change||"string"!=typeof payload?state:(0,objectSpread2.Z)((0,objectSpread2.Z)({},state),{},{input:payload})}));var toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js");let nanoid=(size=21)=>crypto.getRandomValues(new Uint8Array(size)).reduce(((id,byte)=>id+=(byte&=63)<36?byte.toString(36):byte<62?(byte-26).toString(36).toUpperCase():byte>62?"-":"_"),"");commandMap.set(generateKey({id:types.G3.Input,type:types.In.Enter}),(function execute(state,action){return action.type!==types.In.Enter||"string"!=typeof state.input?state:(0,objectSpread2.Z)((0,objectSpread2.Z)({},state),{},{messages:[].concat((0,toConsumableArray.Z)(state.messages),[{text:state.input,user:types.Sf.User,id:nanoid()}]),isLoading:!0,input:""})}));function update(state,action){var _action$id,command=commandMap.get(generateKey({id:null===(_action$id=action.id)||void 0===_action$id?void 0:_action$id.id,type:action.type}));return command?command(state,action):state}function compose(state){return function(actions){return actions.reduce((function(_state,action){return update(_state,action)}),state)}}commandMap.set(generateKey({id:types.G3.Communication,type:types.In.IO}),(function execute(state,action){var type=action.type,payload=action.payload;return type!==types.In.IO||"string"!=typeof payload?state:(0,objectSpread2.Z)((0,objectSpread2.Z)({},state),{},{messages:[].concat((0,toConsumableArray.Z)(state.messages),[{text:payload,user:types.Sf.Bot,id:nanoid()}]),isLoading:!1,input:""})}))}}]);